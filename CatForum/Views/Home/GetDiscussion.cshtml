@model CatForum.Models.Discussion

@{
    ViewData["Title"] = Model.Title; // Make page title the post title
}

<h1>@Model.Title</h1>
<!-- This shows a specific discussion - display a large image -->
<div>
    <hr />
    <dl class="row">
        <!-- Display post content -->
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Content)
        </dd>      
        <dd class="col-sm-10">
            <!-- Display large image for post -->
            <img src="@Url.Content("~/images/" + Model.ImageFilename)" alt="@Model.Title" class="img-fluid" style="max-width: 400px; height: auto;" />
        </dd>
        <!-- Display post date -->
        <dd class="col-sm-10">
            <i class="fa-regular fa-calendar"></i>
            @Model.CreateDate.ToString("MMMM d, yyyy")
        </dd>
    </dl>
</div>

<!-- Link to add new comment -->
<div>
    <a asp-controller="Comments" asp-action="Create" asp-route-discussionId="@Model.DiscussionId">Add New Comment</a>
</div>

<!-- Display comments under post, descending order -->
<h3>Comments</h3>
@if (Model.Comments != null && Model.Comments.Any())
{
    <ul>
        @foreach (var comment in Model.Comments.OrderByDescending(c => c.CreateDate))
        {
            <li>
                <strong>@comment.CreateDate.ToString("MMMM dd, yyyy")</strong>: @comment.Content
            </li>
        }
    </ul>
}
else
{
    <p>No comments yet.</p>
}